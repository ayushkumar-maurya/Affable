<script src="js/jquery-2.2.4.min.js"></script>
<html>
	<body>
		<form>
			<input type="password" id="old-password" name="pwd" placeholder="Old Password">
			<br><br>
			<input type="password" id="new-password" name="pwd" placeholder="New Password">
			<br><br>
			<input type="password" id="cpassword" name="pwd" placeholder="Confirm Password">
			<br><br>
			<input type="button" id="update-password" value="Update">
			<br><br>
			<div id="status" style="display: none;"></div>
		</form>
	</body>

	<script>
		$(document).ready(function() {
			$('#update-password').click(function() {
				var oldPassword = $('#old-password').val();
				var newPassword = $('#new-password').val();
				var cpassword = $('#cpassword').val();
				var error = 0;
				
				if(oldPassword.length == 0)
					error = "Please fill out old password field"
				else if(newPassword.length == 0)
					error = "Please fill out new password field"
				else if(newPassword != cpassword)
					error = "Passwords do not match"			
				
				if(error != 0) {
					document.getElementById("status").innerHTML = error;
					document.getElementById("status").style.display = "block";
				}
				
				else {
					$.ajax({
						url: "update_user_password.php",
						method: "POST",
						data: {oldPassword: oldPassword, newPassword: newPassword},
						success: function(error) {
							if(error != 0) {
								document.getElementById("status").innerHTML = error;
								document.getElementById("status").style.display = "block";
							}
							else {
								for(var i=0; i<3; i++)
									document.getElementsByName("pwd")[i].value = "";
								document.getElementById("status").innerHTML = "Password updated successfully";
								document.getElementById("status").style.display = "block";
							}
						}
					});
				}
			});
		});
	</script>
</html>
